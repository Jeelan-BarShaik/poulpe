<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:zksp="http://www.zkoss.org/2008/zkspring/core"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.zkoss.org/2008/zkspring/core http://www.zkoss.org/2008/zkspring/core/zkspring-core.xsd">
  <zksp:zk-config/>
  <bean id="windowManager" class="org.jtalks.poulpe.web.controller.WindowManagerImpl" scope="desktop"/>
  <bean id="dialogManager" class="org.jtalks.poulpe.web.controller.DialogManagerImpl" scope="singleton"/>
  <bean id="selectedEntity" scope="desktop" class="org.jtalks.poulpe.web.controller.SelectedEntity"/>
  <bean id="forumStructureVm" class="org.jtalks.poulpe.web.controller.section.ForumStructureVm" scope="desktop">
    <constructor-arg index="0" ref="forumStructureService"/>
    <constructor-arg index="1" ref="windowManager"/>
    <constructor-arg index="2" ref="selectedEntity"/>
    <constructor-arg index="3">
      <bean class="org.jtalks.poulpe.web.controller.section.ForumStructureData">
        <constructor-arg>
          <bean class="org.jtalks.poulpe.web.controller.section.dialogs.BranchEditingDialog">
            <constructor-arg index="0" ref="groupDao"/>
          </bean>
        </constructor-arg>
      </bean>
    </constructor-arg>
  </bean>
  <bean id="branchPermissionManagementVm" scope="desktop"
        class="org.jtalks.poulpe.web.controller.branch.BranchPermissionManagementVm">
    <constructor-arg ref="windowManager"/>
    <constructor-arg ref="branchService"/>
    <constructor-arg ref="selectedEntity"/>
  </bean>

  <bean id="editGroupsForBranchPermissionVm" scope="prototype"
        class="org.jtalks.poulpe.web.controller.branch.EditGroupsForBranchPermissionVm">
    <constructor-arg ref="windowManager"/>
    <constructor-arg ref="branchService"/>
    <constructor-arg ref="groupService"/>
    <constructor-arg ref="selectedEntity"/>
  </bean>

  <bean id="editGroupsForComponentPermissionVm" scope="prototype"
        class="org.jtalks.poulpe.web.controller.component.EditGroupsForComponentPermissionVm">
    <constructor-arg ref="windowManager"/>
    <constructor-arg ref="componentService"/>
    <constructor-arg ref="groupService"/>
    <constructor-arg ref="selectedEntity"/>
  </bean>

  <bean id="usersVm" scope="desktop" class="org.jtalks.poulpe.web.controller.users.UsersVm">
    <constructor-arg index="0" ref="userService"/>
  </bean>

  <bean id="userGroupVm" scope="desktop" class="org.jtalks.poulpe.web.controller.group.UserGroupVm">
    <constructor-arg index="0" ref="groupService"/>
    <constructor-arg index="1" ref="selectedEntity"/>
    <constructor-arg index="2" ref="windowManager"/>
  </bean>

  <bean id="rankManagementVm" scope="desktop" class="org.jtalks.poulpe.web.controller.rank.RankManagementVm">
    <constructor-arg index="0" ref="rankService"/>
  </bean>

  <bean id="editComponentVm" scope="desktop" class="org.jtalks.poulpe.web.controller.component.EditComponentVm">
    <constructor-arg index="0" ref="componentService"/>
    <property name="selectedEntity" ref="selectedEntity"/>
    <property name="windowManager" ref="windowManager"/>
  </bean>

  <bean id="editGroupMembersVm" scope="prototype" class="org.jtalks.poulpe.web.controller.group.EditGroupMembersVm">
    <constructor-arg ref="windowManager"/>
    <constructor-arg ref="groupService"/>
    <constructor-arg ref="userService"/>
    <constructor-arg ref="selectedEntity"/>
  </bean>

  <bean id="groupsPermissionsVm" scope="prototype" class="org.jtalks.poulpe.web.controller.group.GroupsPermissionsVm">
    <constructor-arg ref="windowManager"/>
    <constructor-arg ref="componentService"/>
    <constructor-arg ref="selectedEntity"/>
  </bean>

  <bean id="adminWindowVm" class="org.jtalks.poulpe.web.controller.AdminWindow" scope="prototype">
    <property name="windowManager" ref="windowManager"/>
  </bean>

  <bean id="topicTypeVm" class="org.jtalks.poulpe.web.controller.topictype.TopicTypeVm" scope="desktop">
    <constructor-arg index="0" ref="topicTypeService"/>
    <constructor-arg index="1" ref="dialogManager"/>
  </bean>

  <bean id="userBanningVm" scope="desktop" class="org.jtalks.poulpe.web.controller.userbanning.UserBanningVm">
    <constructor-arg index="0" ref="userService"/>
  </bean>

  <bean id="componentsVm" class="org.jtalks.poulpe.web.controller.component.ComponentsVm" scope="prototype">
    <property name="componentService" ref="componentService"/>
    <property name="dialogManager" ref="dialogManager"/>
    <property name="windowManager" ref="windowManager"/>
    <property name="selectedEntity" ref="selectedEntity" />
  </bean>

</beans>
